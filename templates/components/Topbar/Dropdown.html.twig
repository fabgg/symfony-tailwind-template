{% props userName, userAvatar = null %}

<div class="relative" data-controller="dropdown">
    <button type="button" data-action="dropdown#toggle" class="flex items-center gap-2 text-sm hover:opacity-80 transition-opacity">
        {% if userAvatar %}
            <img src="{{ userAvatar }}" alt="{{ userName }}" class="w-8 h-8 rounded-full object-cover">
        {% else %}
            <span class="w-8 h-8 rounded-full bg-primary-600 text-white flex items-center justify-center text-xs font-semibold">
                {{ userName|split(' ')|map(n => n|first|upper)|join('')|slice(0, 2) }}
            </span>
        {% endif %}
        <span class="hidden sm:inline text-text-primary">{{ userName }}</span>
        <svg class="w-4 h-4 text-text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M19 9l-7 7-7-7"/></svg>
    </button>

    <div data-dropdown-target="menu" class="hidden absolute right-0 mt-2 w-48 rounded-lg shadow-lg bg-surface border border-border py-1 z-50">
        {% block content %}
            <a href="{{ path('app_profile_show') }}" class="block px-4 py-2 text-sm text-text-primary hover:bg-surface-hover transition-colors">My Profile</a>
            <hr class="my-1 border-border">
            <a href="{{ path('app_logout') }}" class="block px-4 py-2 text-sm text-danger-600 hover:bg-surface-hover transition-colors">Log out</a>
        {% endblock %}
    </div>
</div>
